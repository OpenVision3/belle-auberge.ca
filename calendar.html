<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <style>
    #calendar {
      max-width: 350px;
      margin: 10px auto;
    }
  </style>
</head>
<body>
  <div id="calendar"></div>

  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      const calendarEl = document.getElementById('calendar');

      // Fetch data from Apps Script Web App
      const response = await fetch('https://script.google.com/macros/s/AKfycbyHlRc-mzfvp4aSAL3BJmdTSgSswKdFV6bbh6ZSYqV0joxRBj3YtnmCExdHzAwvg9-e0w/exec');
      const events = await response.json();

      const calendar = new FullCalendar.Calendar(calendarEl, {
        themeSystem: 'standard',
        initialView: 'dayGridMonth',
        events: events.map(event => ({
          title: event.title,
          start: event.start,
          allDay: event.allDay,
          color: event.color,
          extendedProps: {
            clickable: event.clickable
          }
        })),
        dateClick: function(info) {
          const event = calendar.getEvents().find(e => e.startStr === info.dateStr);
          if (event && event.extendedProps.clickable) {
            alert(`Date: ${info.dateStr}\nPrice: ${event.title}`);
          }
        }
      });

      calendar.render();
    });
  </script>
</body>
</html>
